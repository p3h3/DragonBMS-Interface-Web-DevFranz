"use strict";const POW_2_24=5.960464477539063e-8,POW_2_32=4294967296,POW_2_53=9007199254740992;function encode(e){let u=new ArrayBuffer(256),f=new DataView(u),a,s=0;function c(e){let t=u.byteLength;for(var r=s+e;t<r;)t<<=1;if(t!==u.byteLength){var n=f,i=(u=new ArrayBuffer(t),f=new DataView(u),s+3>>2);for(let e=0;e<i;++e)f.setUint32(e<<2,n.getUint32(e<<2))}return a=e,f}function l(){s+=a}function h(e){l(c(1).setUint8(s,e))}function g(t){var r=c(t.length);for(let e=0;e<t.length;++e)r.setUint8(s+e,t[e]);l()}function w(e,t){var r,n;t<24?h(e<<5|t):t<256?(h(e<<5|24),h(t)):t<65536?(h(e<<5|25),n=t,l(c(2).setUint16(s,n))):t<4294967296?(h(e<<5|26),n=t,l(c(4).setUint32(s,n))):(h(e<<5|27),t=(e=t)%POW_2_32,e=(e-t)/POW_2_32,(r=c(8)).setUint32(s,e),r.setUint32(s+4,t),l())}if(!function t(r){let n;if(!1===r)return h(244);if(!0===r)return h(245);if(null===r)return h(246);if(void 0===r)return h(247);switch(typeof r){case"number":if(Math.floor(r)===r){if(0<=r&&r<=POW_2_53)return w(0,r);if(-POW_2_53<=r&&r<0)return w(1,-(r+1))}return h(251),o=r,l(c(8).setFloat64(s,o));case"string":var i=[];for(n=0;n<r.length;++n){var u=r.charCodeAt(n);u<128?i.push(u):(u<2048?i.push(192|u>>6):(u<55296?i.push(224|u>>12):(u=(1023&u)<<10,u|=1023&r.charCodeAt(++n),i.push(240|(u+=65536)>>18),i.push(128|u>>12&63)),i.push(128|u>>6&63)),i.push(128|63&u))}return w(3,i.length),g(i);default:let e;if(Array.isArray(r))for(w(4,e=r.length),n=0;n<e;++n)t(r[n]);else if(r instanceof Uint8Array)w(2,r.length),g(r);else{var f=Object.keys(r);for(w(5,e=f.length),n=0;n<e;++n){var a=f[n];t(a),t(r[a])}}}var o}(e),"slice"in u)return u.slice(0,s);var e=new ArrayBuffer(s),t=new DataView(e);for(let e=0;e<s;++e)t.setUint8(e,f.getUint8(e));return e}function decode(t,h,g){let w=new DataView(t),v=0;function d(e,t){return v+=e,t}function y(e){return d(e,new Uint8Array(t,v,e))}function p(){return d(1,w.getUint8(v))}function U(){return d(2,w.getUint16(v))}function r(){return d(4,w.getUint32(v))}function _(){return 255===w.getUint8(v)&&(v+=1,1)}function A(e){if(e<24)return e;if(24===e)return p();if(25===e)return U();if(26===e)return r();if(27===e)return r()*POW_2_32+r();if(31===e)return-1;throw"Invalid length encoding"}function O(e){var t=p();if(255===t)return-1;var r=A(31&t);if(r<0||t>>5!==e)throw"Invalid indefinite length element";return r}function P(t,r){for(let e=0;e<r;++e){let e=p();128&e&&(e<224?(e=(31&e)<<6|63&p(),--r):e<240?(e=(15&e)<<12|(63&p())<<6|63&p(),r-=2):(e=(15&e)<<18|(63&p())<<12|(63&p())<<6|63&p(),r-=3)),e<65536?t.push(e):(e-=65536,t.push(55296|e>>10),t.push(56320|1023&e))}}"function"!=typeof h&&(h=function(e){return e}),"function"!=typeof g&&(g=function(){});var e=function t(){var e=p(),r=e>>5,e=31&e;let n,i;if(7==r)switch(e){case 25:{var u=new ArrayBuffer(4),u=new DataView(u),f=U(),a=32768&f;let e=31744&f;if(f&=1023,31744===e)e=261120;else if(0!==e)e+=114688;else if(0!=f)return(a?-1:1)*f*POW_2_24;return u.setUint32(0,a<<16|e<<13|f<<13),u.getFloat32(0)}case 26:return d(4,w.getFloat32(v));case 27:return d(8,w.getFloat64(v))}if((i=A(e))<0&&(r<2||6<r))throw"Invalid length";switch(r){case 0:return i;case 1:return-1-i;case 2:if(i<0){var o=[];let e=0;for(;0<=(i=O(r));)e+=i,o.push(y(i));var s=new Uint8Array(e);let t=0;for(n=0;n<o.length;++n)s.set(o[n],t),t+=o[n].length;return s}return y(i);case 3:var c=[];if(i<0)for(;0<=(i=O(r));)P(c,i);else P(c,i);return String.fromCharCode.apply(null,c);case 4:let e;if(i<0)for(e=[];!_();)e.push(t());else for(e=new Array(i),n=0;n<i;++n)e[n]=t();return e;case 5:var l={};for(n=0;n<i||i<0&&!_();++n)l[t()]=t();return l;case 6:return h(t(),i);case 7:switch(i){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:return g(i)}}}();if(v!==t.byteLength)throw"Remaining bytes";return e}module.exports={encode:encode,decode:decode};