import gui_elements from"../gui_elements";export default class fileObject extends gui_elements{constructor(e){super(),this.fileType=e,this.hasFileAccess()||document.getElementById("tileBarSelectDataLoggingFile").classList.add("hidden")}async getSaveFileHandle(e){this.hasFileAccess()&&(e={suggestedName:e,excludeAcceptAllOption:!0,multiple:!1},"csv"===this.fileType&&(e.types=[{description:"CSV File",accept:{"text/csv":[".csv"]}}]),"json"===this.fileType&&(e.types=[{description:"JSON File",accept:{"text/json":[".json"]}}]),this.fileHandle=await window.showSaveFilePicker(e),this.writableStream=await this.fileHandle.createWritable())}async getReadFileHandle(){var e={types:[{description:this.fileType+" File",accept:{"text/*":["."+this.fileType]}}],excludeAcceptAllOption:!0,multiple:!1};[this.fileHandle]=await window.showOpenFilePicker(e)}saveLegacy(e,i){var t;this.hasFileAccess()||i.length<2||(t={},"csv"===this.fileType&&(t.type="text/csv"),"xml"===this.fileType&&(t.type="text/xml"),i=new File([i.join("\n")],"",t),this.aDownloadFile.href=window.URL.createObjectURL(i),this.aDownloadFile.setAttribute("download",e),this.aDownloadFile.click())}hasFileAccess(){return"chooseFileSystemEntries"in window||"showOpenFilePicker"in window}}