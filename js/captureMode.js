let video=getId("capture-mode-video"),constraints=(captureModeContainer.addEventListener("dblclick",()=>{"user"===constraints.video.facingMode.exact?constraints.video.facingMode.exact="environment":constraints.video.facingMode.exact="user",console.log(constraints);try{stopStream()}catch(e){console.log("probably no video started"),console.log(e)}startStream(constraints)}),{video:{height:{min:800},width:{min:600},facingMode:{exact:"environment"}}});function activateCaptureMode(){captureModeContainer.classList.remove("display-none"),constraints.video.aspectRatio={exact:video.scrollHeight/video.scrollWidth},"mediaDevices"in navigator&&navigator.mediaDevices.getUserMedia&&startStream(constraints)}function closeCaptureMode(){captureModeContainer.classList.add("display-none"),stopStream()}const startStream=async e=>{e=await navigator.mediaDevices.getUserMedia(e);handleStream(e)},handleStream=e=>{video.srcObject=e};function stopStream(){null!==video.srcObject&&void 0!==video.srcObject&&video.srcObject.getTracks().forEach(function(e){e.stop()})}window.addEventListener("scroll",()=>{zoomedIn&&isScrolledIntoView(captureModeContainer)&&zoom.out()});